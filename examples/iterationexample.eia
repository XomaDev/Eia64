include(
  static:std:math,
  static:std:string
)

fn iterateEveryN(n: Int, text: String, callback: Unit) {
  n = copy(n)
  var j = 0

  let maxLength = len(text)
  until (j < maxLength) {
    let till = math.min(j + n, maxLength)
    let substring = text.part(j, till)
    callback(substring)
    j = till
  }
}

let callback(sequence) {
  println("Callback received: " + sequence)
}
iterateEveryN(4, "HACKCLUB!", callback)